!function(e){if("object"==typeof exports)module.exports=e();else if("function"==typeof define&&define.amd)define(e);else{var t;"undefined"!=typeof window?t=window:"undefined"!=typeof global?t=global:"undefined"!=typeof self&&(t=self),(t.wunderlist||(t.wunderlist={})).sdk=e()}}(function(){return function e(t,i,n){function r(o,a){if(!i[o]){if(!t[o]){var c="function"==typeof require&&require;if(!a&&c)return c(o,!0);if(s)return s(o,!0);throw new Error("Cannot find module '"+o+"'")}var u=i[o]={exports:{}};t[o][0].call(u.exports,function(e){var i=t[o][1][e];return r(i?i:e)},u,u.exports,e,t,i,n)}return i[o].exports}for(var s="function"==typeof require&&require,o=0;o<n.length;o++)r(n[o]);return r}({1:[function(e,t){function i(){}var n=t.exports={};n.nextTick=function(){var e="undefined"!=typeof window&&window.setImmediate,t="undefined"!=typeof window&&window.postMessage&&window.addEventListener;if(e)return function(e){return window.setImmediate(e)};if(t){var i=[];return window.addEventListener("message",function(e){var t=e.source;if((t===window||null===t)&&"process-tick"===e.data&&(e.stopPropagation(),i.length>0)){var n=i.shift();n()}},!0),function(e){i.push(e),window.postMessage("process-tick","*")}}return function(e){setTimeout(e,0)}}(),n.title="browser",n.browser=!0,n.env={},n.argv=[],n.on=i,n.addListener=i,n.once=i,n.off=i,n.removeListener=i,n.removeAllListeners=i,n.emit=i,n.binding=function(){throw new Error("process.binding is not supported")},n.cwd=function(){return"/"},n.chdir=function(){throw new Error("process.chdir is not supported")}},{}],2:[function(e,t){(function(i,n){"use strict";var r=i.browser;if(r&&n.MagiConsole)t.exports=n.MagiConsole;else{var s=n.console,o=e("wunderbits.core/public/WBClass"),a=e("wunderbits.core/public/lib/assert"),c=e("wunderbits.core/public/lib/functions"),u=e("wunderbits.core/public/lib/toArray"),l={error:3,warn:4,log:5,info:6,debug:7},d=Object.keys(l),f={blue:"[34m",cyan:"[36m",green:"[32m",grey:"[90m",magenta:"[35m",red:"[31m",white:"[37m",yellow:"[33m"},p="[39m",v={debug:"cyan",error:"red",info:"grey",log:"white",warn:"yellow"};d.forEach(function(e){"function"!=typeof s[e]&&(s[e]=s.log)});var h={constructor:function(e){var t=this;a.string(e,"namespace must be a string");var i=m.namespaces;return i[e]instanceof m?i[e]:(t.namespace=e,i[e]=t,void o.call(t))},shouldRunLevel:function(e){var t=l[m.level],i=l[e];return void 0===t||void 0===i?!0:m.levelOnly?i===t:t>=i},shouldRun:function(e){var t=this,i=m.pattern,n=m.level,r=i&&i.test(t.namespace);return r=r&&(n?t.shouldRunLevel(e):!0),!(!r||!s)},colorizeString:function(e,t){return f[t]+e+p},colorizeNamespace:function(e,t){var i=v[t];return i&&(e=this.colorizeString(e,i)),e},colorizeStrings:function(e,t){var i=this;return t.forEach(function(n,r){"string"==typeof n&&(t[r]=i.colorizeNamespace(n,e))}),t},injectNamespace:function(e,t){var i=this;if(d.indexOf(e)>=0){t=u(t);var n="["+i.namespace.toUpperCase()+"]";"string"==typeof t[0]?t[0]=n+" "+t[0]:t.unshift(n),!r&&i.colorizeStrings(e,t)}return t}};c(s).forEach(function(e){h[e]=function(){var t=this,i=arguments;t.shouldRun(e)&&(i=t.injectNamespace(e,i),s[e].apply(s,i))}});var m=o.extend(h);if(m.release=function(){m.namespaces={}},m.reset=m.off=function(){m.pattern=void 0,m.level=void 0,m.levelOnly=!1},m.setPattern=function(e){a.string(e,"regexPatternString must be a string"),e="*"===e?".?":e,m.pattern=new RegExp(e)},m.setLevel=function(e,t){a.string(e,"logLevel must be a string"),e="*"===e?void 0:e,m.level=e,m.levelOnly=!!t},!r){var g=i.env,b=g.MLOG,y=g.MLEVEL;b&&m.setPattern(b),y&&m.setLevel(y,"true"===g.MLEVELONLY)}m.release(),m.reset(),t.exports=m}}).call(this,e("Rdh0rp"),"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{Rdh0rp:1,"wunderbits.core/public/WBClass":5,"wunderbits.core/public/lib/assert":13,"wunderbits.core/public/lib/functions":23,"wunderbits.core/public/lib/toArray":29}],3:[function(e,t){"use strict";var i=e("./WBEventEmitter").extend({mixins:[e("./mixins/WBDestroyableMixin"),e("./mixins/WBUtilsMixin"),e("./mixins/ObservableHashMixin")]});t.exports=i},{"./WBEventEmitter":7,"./mixins/ObservableHashMixin":33,"./mixins/WBDestroyableMixin":35,"./mixins/WBUtilsMixin":38}],4:[function(e,t){"use strict";var i=e("./WBSingleton").extend({mixins:[e("./mixins/WBEventsMixin"),e("./mixins/WBBindableMixin"),e("./mixins/WBDestroyableMixin"),e("./mixins/WBUtilsMixin"),e("./mixins/ObservableHashMixin")]});t.exports=i},{"./WBSingleton":10,"./mixins/ObservableHashMixin":33,"./mixins/WBBindableMixin":34,"./mixins/WBDestroyableMixin":35,"./mixins/WBEventsMixin":36,"./mixins/WBUtilsMixin":38}],5:[function(e,t){"use strict";function i(e,t){var n=this;e=e||{};var s=e.mixins||[];delete e.mixins;for(var o,a=r(n,e,t);s.length;)o=s.shift(),"function"==typeof o.applyToClass&&o.applyToClass(a);return a.extend=n.extend||i,a}function n(e){var t=this;t.uid=t.uid||a(),t.options=e||t.options,t.augmentProperties(),t.initialize.apply(t,arguments),t.initMixins.apply(t,arguments)}var r=e("./lib/inherits"),s=e("./lib/extend"),o=e("./lib/clone"),a=e("./lib/createUID"),c=e("./lib/fromSuper"),u={initialize:function(){var e=this;return e},initMixins:function(){for(var e,t=this,i=c.concat(t,"initializers");i.length;)e=i.shift(),"function"==typeof e&&e.apply(t,arguments)},augmentProperties:function(){function e(e,i){var n=typeof i;t[e]="function"===n?i.call(t):"object"===n?o(i,!0):i}var t=this,i=c.merge(t,"properties");for(var n in i)e(n,i[n])}};s(n.prototype,u),n.extend=i,t.exports=n},{"./lib/clone":14,"./lib/createUID":15,"./lib/extend":20,"./lib/fromSuper":22,"./lib/inherits":25}],6:[function(e,t){"use strict";function i(e,t,i){return function(){var n=this;if(!(n instanceof l))throw new Error(i+" invoked with wrong context");if(n._state!==a.pending)return n;n._args=o(arguments);var r=t?n._args.shift():void 0;return n._state=e,n.trigger(r),n}}var n=e("./WBClass"),r=e("./WBPromise"),s=e("./lib/assert"),o=e("./lib/toArray"),a={pending:0,resolved:2,rejected:4},c={0:["pending"],2:["resolved","resolve"],4:["rejected","reject"]},u={properties:{_state:a.pending,_args:[],handlers:[]},initialize:function(e){var t=this;t._context=e},state:function(){var e=this;return c[e._state][0]},trigger:function(e){var t=this;if(t._state!==a.pending)for(var i,n=t.handlers;n.length;)i=n.shift(),t.invoke(i,e||t._context)},invoke:function(e,t){var i=this,n=i._state,r=e.context||t||i,s=e.args;i._args.forEach(function(e){s.push(e)});var o=e.type,c="then"===o||"done"===o&&n===a.resolved||"fail"===o&&n===a.rejected;c&&e.fn.apply(r,s)},promise:function(){var e=this;return e._promise=e._promise||new r(this),e._promise}};["then","done","fail"].forEach(function(e){u[e]=function(){var t=this,i=o(arguments),n=i.shift(),r=i.shift();return s["function"](n,e+" accepts only functions"),t.handlers.push({type:e,context:r,fn:n,args:i}),t.trigger(),t}}),u.always=u.then,[a.resolved,a.rejected].forEach(function(e){var t=c[e][1];u[t]=i(e,!1,t),u[t+"With"]=i(e,!0,t)});var l=n.extend(u);t.exports=l},{"./WBClass":5,"./WBPromise":9,"./lib/assert":13,"./lib/toArray":29}],7:[function(e,t){"use strict";var i=e("./WBClass").extend({mixins:[e("./mixins/WBBindableMixin"),e("./mixins/WBEventsMixin")]});t.exports=i},{"./WBClass":5,"./mixins/WBBindableMixin":34,"./mixins/WBEventsMixin":36}],8:[function(e,t){"use strict";var i=e("./lib/extend"),n=e("./lib/clone"),r=e("./lib/assert"),s=e("./WBSingleton"),o=s.extend({applyTo:function(e){var t,r=n(this.Behavior,!0);"function"==typeof r.initialize&&(t=r.initialize,delete r.initialize);var s=r.properties;return delete r.properties,i(e,r),t&&t.apply(e),s&&i(e,s),e},applyToClass:function(e){r["class"](e,"applyToClass expects a class");var t=e.prototype,s=n(this.Behavior,!0),o=s.initialize;"function"==typeof o&&(!t.hasOwnProperty("initializers")&&(t.initializers=[]),t.initializers.push(o),delete s.initialize);var a=s.properties;return delete s.properties,i(t,s),!t.hasOwnProperty("properties")&&(t.properties={}),a&&i(t.properties,a),e}});o.extend=function(e,t){e||(e={}),t||(t={});var r=n(this.Behavior,!0);t.Behavior=i(r,e);var a=s.extend.call(this,t);return a.extend=o.extend,a},t.exports=o},{"./WBSingleton":10,"./lib/assert":13,"./lib/clone":14,"./lib/extend":20}],9:[function(e,t){"use strict";function i(e){return function(){var t=this.deferred;return t[e].apply(t,arguments),this}}var n=e("./WBClass"),r={constructor:function(e){this.deferred=e},promise:function(){return this},state:function(){return this.deferred.state()}};["done","fail","then"].forEach(function(e){r[e]=i(e)}),r.always=r.then,t.exports=n.extend(r)},{"./WBClass":5}],10:[function(e,t){"use strict";function i(e,t){for(var i;e.length;)i=e.shift(),"function"==typeof i.applyTo&&i.applyTo(t)}function n(e){e=e||{};var t=this||a;o.prototype=t;var c=new o,u=e.mixins||[];return e.mixins=void 0,i(u,c),r(c,e),c.extend=n,c.uid=s(),c}var r=e("./lib/extend"),s=e("./lib/createUID"),o=function(){};o.prototype={extend:n};var a=new o;t.exports=a},{"./lib/createUID":15,"./lib/extend":20}],11:[function(e,t){"use strict";var i=e("./WBClass"),n=e("./mixins/WBDestroyableMixin"),r=n.Behavior.destroy,s=i.extend({mixins:[e("./mixins/WBEventsMixin"),e("./mixins/WBStateMixin"),e("./mixins/WBBindableMixin"),n],initialize:function(e){var t=this;e&&(t.attributes=e)},sync:function(e,t,i){i&&"function"==typeof i.success&&i.success()},fetch:function(e){var t=this,i=e.success,n=this;return e.success=function(t){return n.set(t,e)?(i&&i(n,t,e),void n.trigger("sync",n,t,e)):!1},t.sync("read",t,e)},save:function(e,t,i){var n=this;return n.destroying||(n.set(e,t,i),"object"==typeof e&&(i=t),n.sync("update",n,i)),n},destroy:function(e){var t=this;t.destroying||(t.destroying=!0,r.call(t,e),t.attributes={},t.sync("delete",t,e))}});t.exports=s},{"./WBClass":5,"./mixins/WBBindableMixin":34,"./mixins/WBDestroyableMixin":35,"./mixins/WBEventsMixin":36,"./mixins/WBStateMixin":37}],12:[function(e,t){"use strict";t.exports={lib:e("./lib"),BaseEventEmitter:e("./BaseEventEmitter"),BaseSingleton:e("./BaseSingleton"),WBClass:e("./WBClass"),WBDeferred:e("./WBDeferred"),WBEventEmitter:e("./WBEventEmitter"),WBMixin:e("./WBMixin"),WBSingleton:e("./WBSingleton"),WBStateModel:e("./WBStateModel"),mixins:e("./mixins")}},{"./BaseEventEmitter":3,"./BaseSingleton":4,"./WBClass":5,"./WBDeferred":6,"./WBEventEmitter":7,"./WBMixin":8,"./WBSingleton":10,"./WBStateModel":11,"./lib":24,"./mixins":39}],13:[function(e,t){"use strict";function i(e,t){if(!e)throw new Error(t||"")}function n(e){i[e]=function(t,n){i(typeof t===e,n)}}var r=Array.isArray;i.empty=function(e,t){var n=r(e)?e:Object.keys(e);i(0===n.length,t)},i.array=function(e,t){i(r(e),t)},i["class"]=function(e,t){var n=e.prototype;i(n&&n.constructor===e,t)},i.number=function(e,t){i("number"==typeof e&&!isNaN(e),t)};for(var s=["undefined","boolean","string","function","object"];s.length;)n(s.shift());t.exports=i},{}],14:[function(e,t){"use strict";function i(e,t){if(e=e.slice(),t){for(var i,n=[];e.length;)i=e.shift(),i=i instanceof Object?s(i,t):i,n.push(i);e=n}return e}function n(e){return new Date(e.getTime())}function r(e,t){var i={};for(var r in e)if(e.hasOwnProperty(r)){var o=e[r];i[r]=o instanceof Date?n(o):"object"==typeof o&&null!==o&&t?s(o,t):o}return i}function s(e,t){return o(e)?i(e,t):r(e,t)}var o=Array.isArray;t.exports=s},{}],15:[function(e,t){"use strict";function i(){return 4294967295*d()|0}function n(){var e=i();return u[e&c]+u[e>>8&c]+u[e>>16&c]+u[e>>24&c]}function r(){var e=i();return u[e&c]+u[e>>8&c]+"-"+u[e>>16&15|64]+u[e>>24&c]}function s(){var e=i();return u[63&e|128]+u[e>>8&c]+"-"+u[e>>16&c]+u[e>>24&c]}function o(){var e=i();return u[e&c]+u[e>>8&c]+u[e>>16&c]+u[e>>24&c]}function a(e){var t=[n(),r(),s(),o()].join("-");return(e?e:"").toString()+t}for(var c=255,u=[],l=0;256>l;l++)u[l]=(16>l?"0":"")+l.toString(16);var d=Math.random;t.exports=a},{}],16:[function(e,t){"use strict";function i(e,t,i){var n;return function(){var r=this,s=arguments,o=function(){n=null,i||e.apply(r,s)},a=i&&!n;clearTimeout(n),n=setTimeout(o,t),a&&e.apply(r,s)}}t.exports=i},{}],17:[function(e,t){"use strict";function i(e){var t=n(arguments);return t[0]=1,t.unshift(e),r.apply(null,t)}var n=e("./toArray"),r=e("./delay");t.exports=i},{"./delay":18,"./toArray":29}],18:[function(e,t){"use strict";function i(e,t,i){var r=n(arguments,3);return setTimeout(function(){var t=i&&i.destroyed;!t&&e.apply(i,r)},t)}var n=e("./toArray");t.exports=i},{"./toArray":29}],19:[function(e,t){"use strict";var i=e("./assert"),n=e("./toArray"),r=e("./clone"),s=/\s+/,o={trigger:"Cannot trigger event(s) without event name(s)",events:"Cannot bind/unbind without valid event name(s)",callback:"Cannot bind/unbind to an event without valid callback function"},a={properties:{_events:{},_cache:{}},on:function(e,t,n){var r=this;return i.string(e,o.events),i["function"](t,o.callback),r.iterate(e,function(e){r.bind(e,t,n);var i=r._cache;i[e]&&t.apply(n||r,i[e])}),r},off:function(e,t,n){var r=this;if(e&&i.string(e,o.events),!e&&!t&&!n)return r._events={},r;var s=e||Object.keys(r._events);return r.iterate(s,function(e){r.unbind(e,t,n)}),r},once:function(e,t,i){var r=this,s=n(arguments);return s[1]=function(){r.off.apply(r,s),t.apply(i||r,arguments)},r.on.apply(r,s),r},publish:function(e){var t=this,r=n(arguments);return i.string(e,o.events),t.iterate(e,function(e){var i=t._cache;i[e]||(i[e]=r.slice(1),r[0]=e,t.trigger.apply(t,r))}),t},unpublish:function(e){var t=this;return i.string(e,o.events),t.iterate(e,function(e){t._cache[e]=void 0}),t},unpublishAll:function(){var e=this;return e._cache={},e},trigger:function(e){var t=this;i.string(e,o.trigger);var r=n(arguments,1);return t.iterate(e,function(e){t.triggerEvent(e,r)}),t},triggerEvent:function(e,t){for(var i,n=this,r=n._events||{},s=[],o=e.split(":");o.length;)s.push(o.shift()),i=s.join(":"),i in r&&n.triggerSection(i,o,t)},triggerSection:function(e,t,i){var n=this,s=n._events||{},o=s[e]||[];o.forEach(function(e){var s;t.length&&(s=r(i),s.unshift(t)),e.callback.apply(e.context||n,s||i)})},iterate:function(e,t){var n=this,r=e;for("string"==typeof r?r=r.split(s):i.array(r);r.length;)t.call(n,r.shift())},bind:function(e,t,i){var n=this,r=n._events||{},s=r[e]||(r[e]=[]);return s.push({callback:t,context:i}),n},unbind:function(e,t,i){for(var n,r=this,s=r._events,o=s[e]||[],a=[],c=-1,u=o.length;++c<u;)n=o[c],(t&&t!==n.callback||i&&i!==n.context)&&a.push(n);return s[e]=a,r}};t.exports=a},{"./assert":13,"./clone":14,"./toArray":29}],20:[function(e,t){"use strict";function i(){var e=n(arguments);s(e.length>0,"extend expect one or more objects");for(var t=e.shift();e.length;)r(t,e.shift());return t}var n=e("./toArray"),r=e("./merge"),s=e("./assert");t.exports=i},{"./assert":13,"./merge":27,"./toArray":29}],21:[function(e,t){"use strict";function i(e,t,i){for(var n=0,r=e.length;r>n;n++)if(t.call(i,e[n],n,e)===!1)return}function n(e,t,i){for(var n in e)if(e.hasOwnProperty(n)&&t.call(i,e[n],n)===!1)return}function r(e,t,r){var s=Array.isArray(e)?i:n;s(e,t,r)}t.exports=r},{}],22:[function(e,t){"use strict";function i(e,t){var n=e.constructor,o=n.prototype,a={};e.hasOwnProperty(t)?a=e[t]:o.hasOwnProperty(t)&&(a=o[t]);var c=n&&n.__super__;return c&&(a=r(i(c,t),a)),s({},a)}function n(e,t){var i=e.constructor,r=i.prototype,s=[];e.hasOwnProperty(t)?s=e[t]:r.hasOwnProperty(t)&&(s=r[t]);var o=i&&i.__super__;return o&&(s=[].concat(n(o,t),s)),[].concat(s)}var r=e("./merge"),s=e("./extend");t.exports={merge:i,concat:n}},{"./extend":20,"./merge":27}],23:[function(e,t){"use strict";function i(e){var t=[];for(var i in e)"function"==typeof e[i]&&t.push(i);return t}t.exports=i},{}],24:[function(e,t){"use strict";t.exports={assert:e("./assert"),clone:e("./clone"),createUID:e("./createUID"),debounce:e("./debounce"),defer:e("./defer"),delay:e("./delay"),events:e("./events"),extend:e("./extend"),forEach:e("./forEach"),fromSuper:e("./fromSuper"),functions:e("./functions"),inherits:e("./inherits"),isEqual:e("./isEqual"),merge:e("./merge"),size:e("./size"),toArray:e("./toArray"),when:e("./when"),where:e("./where")}},{"./assert":13,"./clone":14,"./createUID":15,"./debounce":16,"./defer":17,"./delay":18,"./events":19,"./extend":20,"./forEach":21,"./fromSuper":22,"./functions":23,"./inherits":25,"./isEqual":26,"./merge":27,"./size":28,"./toArray":29,"./when":30,"./where":31}],25:[function(e,t){"use strict";function i(e,t,i){var r;return r=t&&t.hasOwnProperty("constructor")?t.constructor:function(){return e.apply(this,arguments)},n(r,e),r.prototype=Object.create(e.prototype),n(r.prototype,t),r.prototype.constructor=r,n(r,i),r.__super__=e.prototype,r}var n=e("./extend");t.exports=i},{"./extend":20}],26:[function(e,t){"use strict";function i(e,t){return e===t}t.exports=i},{}],27:[function(e,t){"use strict";function i(e){for(var t,i=n(arguments,1);i.length;){t=i.shift();for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])}return e}var n=e("./toArray");t.exports=i},{"./toArray":29}],28:[function(e,t){"use strict";function i(e){return!Array.isArray(e)&&(e=Object.keys(e)),e.length}t.exports=i},{}],29:[function(e,t){"use strict";function i(e){return e=e>0?e:0,new Array(e)}function n(e,t){for(var n=t||0,r=e.length,s=i(r-n),o=n;r>o;o++)s[o-n]=e[o];return s}t.exports=n},{}],30:[function(e,t){"use strict";function i(){function e(){s.rejectWith(this)}function t(){if("rejected"!==s.state()){var e=a-o.length-1;if(c[e]=r(arguments),o.length){var i=o.shift();i.done(t)}else c.unshift(this),s.resolveWith.apply(s,c)}}var i=this,s=new n(i),o=r(arguments);1===o.length&&Array.isArray(o[0])&&(o=o[0]);var a=o.length,c=new Array(a);if(o.length){o.forEach(function(t){t.fail(e)});var u=o.shift();u.done(t)}else s.resolve();return s.promise()}var n=e("../WBDeferred"),r=e("./toArray");t.exports=i},{"../WBDeferred":6,"./toArray":29}],31:[function(e,t){"use strict";function i(e,t){var i=[];return n(e,function(e){for(var n in t){if(e[n]!==t[n])return;i.push(e)}}),i}var n=e("./forEach");t.exports=i},{"./forEach":21}],32:[function(e,t){"use strict";var i=e("../WBMixin"),n=e("../lib/fromSuper"),r=i.extend({initialize:function(){var e=this;e.controllers=[],e.implemented=[],e["implements"]=n.concat(e,"implements"),e.createControllerInstances(),e.bindOnceTo(e,"destroy","destroyControllers")},createControllerInstances:function(){var e=this,t=e["implements"];"function"==typeof t&&(t=t.call(e));var i,n,r;for(r=t.length;r--;)i=t[r],e.implemented.indexOf(i.toString())<0&&(n=new i(e),e.controllers.push(n),n.parent=e,e.trackImplementedSuperConstructors(i));return e.implemented},trackImplementedSuperConstructors:function(e){var t=this,i=e.__super__,n=i&&i.constructor;n&&(t.implemented.push(n.toString()),t.trackImplementedSuperConstructors(n))},destroyControllers:function(){for(var e,t=this,i=t.controllers;i.length;)e=i.shift(),e.destroyed||e.destroy()}});t.exports=r},{"../WBMixin":8,"../lib/fromSuper":22}],33:[function(e,t){"use strict";var i=e("../WBMixin"),n=e("../lib/fromSuper"),r=e("../lib/clone"),s=i.extend({initialize:function(){var e=this,t=n.merge(e,"observes");for(var i in t)e.bindToTarget(e.resolveTarget(i),t[i])},bindToTarget:function(e,t){var i=this;for(var n in t)i.bindHandlers(e,n,t[n])},bindHandlers:function(e,t,i){var n=this;for(i="string"==typeof i?[i]:r(i);i.length;)n.bindTo(e,t,i.shift())},resolveTarget:function(e){var t=this;if("self"===e)return t;var i=t[e];if(!i&&"string"==typeof e&&e.indexOf(".")>-1)for(e=e.split("."),i=t;e.length&&i;)i=i[e.shift()];return i}});t.exports=s},{"../WBMixin":8,"../lib/clone":14,"../lib/fromSuper":22}],34:[function(e,t){"use strict";var i=e("../WBMixin"),n=e("../lib/createUID"),r=i.extend({properties:{_bindings:{},_namedEvents:{}},callbackFactory:function(e,t){var i,n=this;return i="string"==typeof e?n.stringCallbackFactory(e,t):n.functionCallbackFactory(e,t)},stringCallbackFactory:function(e,t){return function(){t[e].apply(t,arguments)}},functionCallbackFactory:function(e,t){return function(){e.apply(t,arguments)}},bindTo:function(e,t,i,r){var s=this;s.checkBindingArgs.apply(s,arguments);var o=r||s,a=s.isAlreadyBound(e,t,i,o);if(a)return a;var c,u;s.isTargetJquery(e)?(c=s.callbackFactory(i,o),u=[t,c]):(c="string"==typeof i?o[i]:i,u=[t,c,o]),e.on.apply(e,u);var l={uid:n(),target:e,event:t,originalCallback:i,callback:c,context:o};return s._bindings[l.uid]=l,s.addToNamedBindings(t,l),l},isTargetJquery:function(e){var t=e.constructor;return t&&t.fn&&t.fn.on===e.on},bindOnceTo:function(e,t,i,r){var s=this;s.checkBindingArgs.apply(s,arguments),r=r||s;var o=s.isAlreadyBound(e,t,i,r);if(o)return o;var a=function(){("string"==typeof i?r[i]:i).apply(r,arguments),s.unbindFrom(c)},c={uid:n(),target:e,event:t,originalCallback:i,callback:a,context:r};return e.on(t,a,r),s._bindings[c.uid]=c,s.addToNamedBindings(t,c),c},unbindFrom:function(e){var t=this,i=e&&e.uid;if(!e||"string"!=typeof i)throw new Error("Cannot unbind from undefined or invalid binding");var n=e.event,r=e.context,s=e.callback,o=e.target;if(n&&s&&o&&r){o.off(n,s,r);for(var a in e)"uid"!==a&&delete e[a];delete t._bindings[i];var c=t._namedEvents,u=c[n];if(u){for(var l=u&&u.slice(0),d=u.length-1;d>=0;d--)u[d].uid===i&&l.splice(d,1);c[n]=l}}},unbindFromTarget:function(e){var t=this;if(!e||"function"!=typeof e.on)throw new Error("Cannot unbind from undefined or invalid binding target");var i;for(var n in t._bindings)i=t._bindings[n],i.target===e&&t.unbindFrom(i)},unbindAll:function(){var e,t=this;for(var i in t._bindings)e=t._bindings[i],t.unbindFrom(e)},checkBindingArgs:function(e,t,i,n){if(n=n||this,!e||"function"!=typeof e.on)throw new Error("Cannot bind to undefined target or target without #on method");if(!t||"string"!=typeof t)throw new Error("Cannot bind to target event without event name");if(!i||"function"!=typeof i&&"string"!=typeof i)throw new Error("Cannot bind to target event without a function or method name as callback");if("string"==typeof i&&!n[i])throw new Error("Cannot bind to target using a method name that does not exist for the context")},isAlreadyBound:function(e,t,i,n){var r=this,s=r._namedEvents[t];if(s)for(var o=0,a=s.length;a>o;o++){var c=s[o]||{},u=c.target;if(!u)return!1;var l=e.uid?e.uid===u.uid:!1;if(c.originalCallback===i&&c.context===n&&l)return c}return!1},addToNamedBindings:function(e,t){var i=this;i._namedEvents[e]||(i._namedEvents[e]=[]),i._namedEvents[e].push(t)}});t.exports=r},{"../WBMixin":8,"../lib/createUID":15}],35:[function(e,t){"use strict";function i(){}function n(e){var t=this;"string"==typeof e&&(e=t[e]),"function"==typeof e&&e.call(t)}var r=e("../lib/forEach"),s=e("../WBMixin"),o=["unbind","unbindAll","onDestroy"],a=s.extend({destroy:function(){var e=this;e.trigger("destroy"),r(o,n,e),e.destroyObject(e),e.destroyed=!0},destroyObject:function(e){var t=this;for(var i in e)t.destroyKey(i,e)},destroyKey:function(e,t){t.hasOwnProperty(e)&&"uid"!==e&&"cid"!==e&&(t[e]="function"==typeof t[e]?i:void 0)}});t.exports=a},{"../WBMixin":8,"../lib/forEach":21}],36:[function(e,t){"use strict";var i=e("../WBMixin"),n=e("../lib/events"),r=i.extend(n);t.exports=r},{"../WBMixin":8,"../lib/events":19}],37:[function(e,t){"use strict";var i=e("../lib/clone"),n=e("../lib/merge"),r=e("../lib/extend"),s=e("../lib/isEqual"),o=e("../WBMixin"),a=o.extend({attributes:{},options:{},initialize:function(e,t){var i=this;i.attributes=r({},i.defaults,e),i.options=t||{},i.changed={}},get:function(e){return console.warn("getters are deprecated"),this.attributes[e]},set:function(e,t,i){var r=this;if(null===e)return r;var s,o;if("object"==typeof e?(s=e,i=t):(s={},s[e]=t),i||(i={}),i.silent)n(r.attributes,o);else{var a=r.changes(s,i);r._trigger(s,a,i)}return r},unset:function(e,t){return this.set(e,void 0,r({},t,{unset:!0}))},clear:function(e){var t=this;return t.set(t.defaults,e)},changes:function(e,t){var n,r,o=this,a=[],c=i(o.attributes,!0),u=o.attributes;o.changed={};for(n in e)r=e[n],s(u[n],r)||a.push(n),s(c[n],r)?delete o.changed[n]:o.changed[n]=r,u[n]=t.unset?void 0:r;return a},_trigger:function(e,t,i){for(var n,r=this,s=r.attributes;t&&t.length&&r.trigger;)n=t.shift(),r.trigger("change:"+n,r,s[n],i)}});t.exports=a},{"../WBMixin":8,"../lib/clone":14,"../lib/extend":20,"../lib/isEqual":26,"../lib/merge":27}],38:[function(e,t){"use strict";var i=e("../WBMixin"),n=e("../WBDeferred"),r=e("../lib/when"),s=e("../lib/toArray"),o=e("../lib/forEach"),a=e("../lib/delay"),c=e("../lib/defer"),u=e("../lib/functions"),l=i.extend({deferred:function(){var e=this;return new n(e)},when:function(){var e=this;return r.apply(e,arguments)},defer:function(e){var t=this,i=s(arguments);return i[1]=i[1]||this,"string"==typeof e&&(i[0]=t[e]),c.apply(null,i)},delay:function(e){var t=this,i=s(arguments);return i[2]=i[2]||t,"string"==typeof e&&(i[0]=t[e]),a.apply(null,i)},forEach:function(e,t,i){var n=this;i=i||n,"string"==typeof t&&(t=n[t]),o(e,t,i)},functions:function(e){return u(e||this)}});t.exports=l},{"../WBDeferred":6,"../WBMixin":8,"../lib/defer":17,"../lib/delay":18,"../lib/forEach":21,"../lib/functions":23,"../lib/toArray":29,"../lib/when":30}],39:[function(e,t){"use strict";t.exports={ControllableMixin:e("./ControllableMixin"),ObservableHashMixin:e("./ObservableHashMixin"),WBBindableMixin:e("./WBBindableMixin"),WBDestroyableMixin:e("./WBDestroyableMixin"),WBEventsMixin:e("./WBEventsMixin"),WBStateMixin:e("./WBStateMixin"),WBUtilsMixin:e("./WBUtilsMixin")}},{"./ControllableMixin":32,"./ObservableHashMixin":33,"./WBBindableMixin":34,"./WBDestroyableMixin":35,"./WBEventsMixin":36,"./WBStateMixin":37,"./WBUtilsMixin":38}],40:[function(e,t){"use strict";t.exports={release:"0.0.0",clientID:void 0,webSocketTimeout:15e3,api:{host:"https://a.wunderlist.com/api"},realtime:{host:"wss://socket.wunderlist.com:8443/api/v1/sync"}}},{}],41:[function(e,t){"use strict";var i=e("wunderbits.core"),n=i.WBDeferred,r=n.prototype,s=n.extend({properties:{loadDurationTime:void 0,loadStarted:!1,loadStartTime:void 0,latencyTime:void 0,startTime:void 0,url:void 0,xhr:void 0},error:r.fail});t.exports=s},{"wunderbits.core":12}],42:[function(e,t){"use strict";var i=e("wunderbits.core"),n=i.WBDeferred,r=n.extend({properties:{startTime:void 0,endTime:void 0,requestID:void 0,uri:void 0}});t.exports=r},{"wunderbits.core":12}],43:[function(e,t){"use strict";var i=e("wunderbits.core"),n=i.WBSingleton,r=i.mixins.WBBindableMixin,s=i.mixins.WBEventsMixin,o=e("../io/IO"),a=15e3,c=n.extend({mixins:[r,s],init:function(e){var t=this;t.setupIO(e.config),t.startPolling()},destroy:function(){var e=this;e.poller&&clearInterval(e.poller)},setupIO:function(e){var t=this;t.io||(t.io=new o({config:e}).io)},startPolling:function(){var e=this;e.poller&&clearInterval(e.poller),e.poller=setInterval(function(){e.checkApiHealth()},a)},checkApiHealth:function(){var e=this;e.io.get("/health").done(e.onHealthy,e).fail(e.onUnhealthy,e)},onHealthy:function(){var e=this;e.trigger("healthy")},onUnhealthy:function(){var e=this;e.trigger("unhealthy")}});t.exports=c},{"../io/IO":46,"wunderbits.core":12}],44:[function(e,t){(function(i){"use strict";var n=e("wunderbits.core"),r=n.WBSingleton,s=i.navigator||{},o=i.process||{},a=s.userAgent||"node "+o.version,c=r.extend({headers:{"x-client-platform":"web","x-client-product":"wunderlist","x-client-product-version":null,"x-client-system":a,"x-client-system-version":"Standard","x-client-product-git-hash":null},init:function(e){var t=this,i=e,n=t.headers;n["x-client-product-version"]=i.release;var r=/\[(.*)\]/.exec(i.gitHash);r=r&&r[1],n["x-client-product-git-hash"]=r||"dev",i.testing&&(n["x-client-testing"]="true"),i.product&&(n["x-client-product"]=i.product)}});t.exports=c}).call(this,"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"wunderbits.core":12}],45:[function(e,t){"use strict";var i=e("wunderbits.core"),n=i.WBSingleton,r=n.extend({compileParams:function(e){var t,i=!0,n="";for(var r in e)t=encodeURIComponent(e[r]),n+=(i?"?":"&")+r+"="+encodeURIComponent(t),i&&(i=!1);return n},generateURI:function(e,t){var i=this;return e+i.compileParams(t)}});t.exports=r},{"wunderbits.core":12}],46:[function(e,t){"use strict";var i=e("wunderbits.core"),n=i.lib.createUID,r=i.WBDeferred,s=i.mixins.WBBindableMixin,o=i.mixins.WBEventsMixin,a=e("../validators/SchemaValidator"),c=e("./IOBase"),u=c.prototype,l=e("magiconsole"),d=new l("SDK:IO"),f=c.extend({mixins:[s,o],initialize:function(e){var t=this;u.initialize.apply(t,arguments),t.config=e.config,t.requests={},t.wrapVerbs()},wrapVerbs:function(){var e=this,t=e.io;["get","patch","post","put","delete"].forEach(function(i){t["_"+i]=t[i],t[i]=e.requestWrapper.bind(e,i)})},requests:{},tokens:{id:"([-])?[0-9]+",version:"v(\\d)+",provider:"[a-z]+"},routes:{api:[]},authFreeRoutes:{api:["health","{{version}}/oauth/{{provider}}/exchange","{{version}}/signup","{{version}}/authenticate","{{version}}/user/password/reset"]},normalizeUrl:function(e){var t=this;return t.config.api.host+e},extendHeaders:function(e){var t=this,i=t.config.clientID,n=t.config.deviceID,r=t.config.instanceID;return i&&(e["x-client-id"]=i),n&&(e["x-client-device-id"]=n),r&&(e["x-client-instance-id"]=r),"function"==typeof t.config.extendHeaders&&t.config.extendHeaders(e),u.extendHeaders.apply(t,arguments)},setAuthorization:function(e){var t=this,i=t.config.accessToken;i&&(e["x-access-token"]=i)},requestWrapper:function(e,t,i,n,s){var o=this,c=new r,u={};return n||(n=o.generateUID()),o.requests[n]=c,u["x-client-request-id"]=n,s=s?parseInt(s,10):6e4,o.io["_"+e](t,i,u,s).done(function(e,i){Array.isArray(e)?e.forEach(function(e){e.type&&a.validateData(e,e.type)}):e&&e.type&&a.validateData(e,e.type),d.log(i.status,t),c.resolve(e,i.status)}).fail(function(e,i){d.error(i.status,i.statusText,t),c.reject(e,i.status),401===i.status&&o.trigger("unauthorized")}).always(function(){o.requests[n]=void 0}),c.promise()},generateUID:function(){for(var e,t=this;!e||!t.isUIDValid(e);)e=n();return e},isUIDValid:function(e){return!(e in this.requests)},cancelInflightCreate:function(e,t,i){var n=this,r=n.requests[e];if(d.debug("cancelling request locally",e,"alive?",!!r),r){n.requests[e]=void 0;var s=t?{id:t}:{};s.revision=i,r.resolve(s,200)}}});t.exports=f},{"../validators/SchemaValidator":109,"./IOBase":47,magiconsole:2,"wunderbits.core":12}],47:[function(e,t){(function(i){"use strict";var n=e("wunderbits.core"),r=n.WBClass,s=n.WBDeferred,o=n.lib.assert,a=n.lib.extend,c=e("./io/AjaxTransport"),u=e("../helpers/PlatformHeaders"),l=r.prototype,d=/^(https?:)?\/\//,f=/^(https?:)?\/\/\w+\.wunderlist.com\//;t.exports=r.extend({initialize:function(e){var t=this;t.config=e.config,c.maxRequests=t.config.maxHttpRequests||5,l.initialize.apply(t,arguments),t.io=c.ajax.bind(c);for(var i=["delete","get","patch","post","put"],n=0,r=i.length;r>n;n++)t.defineVerb(i[n]);t.routes=t.compileRoutes(t.routes,t.tokens),t.authFreeRoutes=t.compileRoutes(t.authFreeRoutes,t.tokens)},compileRoutes:function(e,t){function i(e){return e.replace(/\{\{(\w+)\}\}/g,function(e,i){return t[i]})}var n=this;if(!e)return void 0;var r={};for(var s in e){var o=e[s];o=o.map(i);var a=new RegExp("^/("+o.join("|")+")(\\?|$)"),c=n.config[s].host;r[c]=a}return r},resolveUrl:function(e){var t,i=this;return d.test(e)?e:(i.routes&&(t=i.resolveRoute(e)),t||(t=i.normalizeUrl(e)),t)},resolveRoute:function(e){var t=this;for(var i in t.routes){var n=t.routes[i];if(n.test(e))return i+e}},normalizeUrl:function(e){var t=i.location;return t.protocol+"//"+t.host+e},extendHeaders:function(e,t){var i=this,n=d.test(t),r=!n||f.test(t);if(e=e||{},r&&a(e,u.headers),i.authFreeRoutes)for(var s in i.authFreeRoutes){var o=i.authFreeRoutes[s];if(o.test(t))return e}return r&&!e.Authorization&&i.setAuthorization(e,t),e},setAuthorization:function(){},defineVerb:function(e){var t=this;t.io[e]=function(i,n,r,a,c){o(i,"need a url for ajax calls"),r=r||{},r=t.extendHeaders(r,i);var u=new s,l=u.promise();if(i=t.resolveUrl(i),"object"==typeof n)if("get"===e){var d,f=[];for(d in n)f.push(d+"="+encodeURIComponent(n[d]));f.length&&(i=i+"?"+f.join("&")),n=void 0}else n=JSON.stringify(n);return t.io(i,{type:e.toUpperCase(),data:n,headers:r,success:u.resolve.bind(u),error:u.reject.bind(u),timeout:a,context:c}),l
}}})}).call(this,"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"../helpers/PlatformHeaders":44,"./io/AjaxTransport":49,"wunderbits.core":12}],48:[function(e,t){"use strict";var i=e("wunderbits.core"),n=i.lib.createUID,r=i.lib.extend,s=i.WBEventEmitter,o=i.WBDeferred,a=e("../helpers/PlatformHeaders"),c=e("./mixins/RequestQueueMixin"),u=e("../deferreds/RestSocketRequestDeferred"),l=e("../wunderbits/lib/SafeParse"),d=e("../validators/SchemaValidator"),f=e("../helpers/URL"),p=e("./io/WebSocket"),v=e("magiconsole"),h=new v("SDK:RESTSOCKET"),m=c.extend({maxRequests:100,executeRequest:function(e){var t=this,i=e.options;t.socketRequest(e.deferred,i.method,i.uri,i.data,i.requestID,i.requestType).always(function(){delete t.executingRequests[e.queueID],t.checkQueue()})}}),g=s.prototype,b=s.extend({mixins:[m],timeout:6e4,socket:void 0,ready:void 0,requests:{},initialize:function(e){var t=this;g.initialize.apply(t,arguments),t.appState=e.appState,t.config=e.config,t.ready=new o,t.socket=new p(e),t.requests={},t.wrapVerbs(),t.pollForTimeouts(),t.bindToSocket(),t.ready.resolve()},destroy:function(){var e=this;e.unbindAll(),e.socket&&e.socket.destroy(),e.destroyed=!0},wrapVerbs:function(){var e=this,t=["get","post","put","patch","delete"];t.forEach(function(t){var i=e[t];e[t]=function(){return i.apply(e,arguments)}})},pollForTimeouts:function(){var e=this;e.timer&&clearInterval(e.timer),e.timer=setInterval(function(){e.checkForRequestTimeouts()},1e3)},close:function(){var e=this;e.socket&&e.socket.close()},bindToSocket:function(){var e=this;e.bindTo(e.socket,"open","onSocketConnect"),e.bindTo(e.socket,"message","onMessage"),e.bindTo(e.socket,"close","onSocketFalure"),e.bindTo(e.socket,"close","onSocketDisconnect"),e.bindTo(e.socket,"error","onSocketFalure")},onSocketConnect:function(e){var t=this;t.getSocketHealth().done(function(){t.connected=!0,t.trigger("connected",e),t.pollHealth()}).fail(t.close,t)},pollHealth:function(){var e=this;e.cancelPollHealth(),e.poller=setInterval(function(){e.connected?e.getSocketHealth().fail(e.close,e):e.cancelPollHealth()},15e3)},cancelPollHealth:function(){var e=this;e.poller&&clearInterval(e.poller)},getSocketHealth:function(){var e=this,t=e.request(void 0,void 0,void 0,void 0,"health").done(function(e,t){h.info("websocket healthy",e||"",t)}).fail(function(e,t){h.error("websocket not healthy",e||"",t)});return t.promise()},onSocketDisconnect:function(e){var t=this;t.cancelPollHealth(),t.connected=!1,t.trigger("disconnected",e)},onMessage:function(e){var t=this,i=l.json(e.data);i&&i.headers&&(i.headers=t.normalizeHeaders(i.headers));var n=t.extractRequestIDFromHeaders(i),r=n&&t.requests[n];switch(t.parseDataBody(i),i.type){case"request":r&&t.handleRequest(r,i,n);break;case"health":r&&t.handleHealthRequest(r,i,n);break;case"desktop_notification":t.handleDesktopNotification(i);break;case"mutation":t.isCorrectMutationVersion(i)&&t.handleMessage(i);break;default:t.handleMessage(i)}},extractRequestIDFromHeaders:function(e){return e&&e.headers&&e.headers["x-client-request-id"]},parseDataBody:function(e){e&&e.body&&(e.body=l.json(e.body))},isCorrectMutationVersion:function(e){var t=!1,i=e.subject.type,n=e.version,r=["file"],s=-1!==r.indexOf(i),o=2===n,a=1===n;return s&&(o||a)?t=!0:a&&(t=!0),t},handleRequest:function(e,t,i){var n=this;e.endTime=Date.now();var r=/^2/.test(t.status);n.logRequestTimings(r,e,t),Array.isArray(t.body)?t.body.forEach(function(e){e.type&&d.validateData(e,e.type)}):t.body&&t.body.type&&d.validateData(t.body,t.body.type),e[r?"resolve":"reject"](t.body,t.status),n.checkStillAuthorized(t.status),n.requests[i]=void 0},handleHealthRequest:function(e,t,i){var n=this;e.endTime=Date.now();var r=t.body&&t.body.healthy===!0;n.logRequestTimings(r,e,t),e[r?"resolve":"reject"](t.body,t.status),n.requests[i]=void 0},logRequestTimings:function(e,t,i){var n=[i.status,t.uri,t.endTime-t.startTime];e?(this.triggerTiming(t),h.info.apply(h,n)):h.error.apply(h,n)},triggerTiming:function(e){var t=this,i=e.startTime;e.loadDurationTime=e.endTime-i,e.latencyTime=e.loadDurationTime;var n={start:i,end:e.endTime,duration:e.loadDurationTime,latency:e.latencyTime,download:void 0,url:e.uri,type:"websocket"};t.trigger("timing:io",n)},checkStillAuthorized:function(e){var t="unauthorized";401===e&&this.trigger(t)},handleMessage:function(e){var t=this;h.debug("arbitrary message",e);var i=e&&e.subject&&e.subject.type;i&&d.validateData(e.data,i),t.trigger("event",e);var n=e&&e.operation;n&&t.trigger(n,e)},handleDesktopNotification:function(e){var t=this;t.trigger("desktopNotification",e)},request:function(e,t,i,n,r){var s=this,o={method:e,uri:t,data:i,requestID:n,requestType:r},a=s.queueRequest(t,o,u);return a.promise()},socketRequest:function(e,t,i,n,r,s){var o=this,a=o.socket;r=r||o.generateUID();var c=o.compileHeaders(r),u={type:s||"request",headers:o.normalizeHeaders(c)};return t&&(u.verb=t),i&&(u.uri=i),"POST"!==t&&"PATCH"!==t&&"PUT"!==t||!n||(u.body=JSON.stringify(n)),e.requestID=r,e.uri=i,e.startTime=Date.now(),o.requests[r]=e,o.appState.isOnline()&&o.socket.isConnected()?a.send(JSON.stringify(u)):e.reject({errors:["no websocket connection available"]},0),e.promise()},compileHeaders:function(e){var t=this,i={"x-client-request-id":e,"x-client-id":t.appState.attributes.clientID,"x-client-instance-id":t.appState.attributes.instanceID,"x-client-device-id":t.appState.attributes.deviceID,"content-type":"application/json",accept:"application/json"};i=r(i,a.headers),t.config&&"function"==typeof t.config.extendHeaders&&t.config.extendHeaders(i);var n;for(var s in i)n=i[s],(void 0===n||null===n)&&delete i[s];return i},normalizeHeaders:function(e){var t={};for(var i in e)t[i.toLowerCase()]=e[i];return t},requestWrapper:function(e,t,i,n){var r=this,s=new o;return t="/api"+t,r.ready.done(function(){r.request(e,t,i,n).done(s.resolve.bind(s)).fail(s.reject.bind(s))}),s.promise()},onSocketFalure:function(){var e,t=this;for(var i in t.requests)e=t.requests[i],e&&e.reject({errors:["websocket connection lost"]},0),t.requests[i]=void 0},checkForRequestTimeouts:function(){var e=this,t=Date.now();for(var i in e.requests)e.checkRequestIsTimedout(e.requests[i],t)},checkRequestIsTimedout:function(e,t){var i=this;e&&t-e.startTime>=i.timeout&&(h.error("timeout",e.uri,t-e.startTime),e.reject({errors:["request timedout locally due to no response in "+i.timeout]},408),i.requests[e.requestID]=void 0)},"delete":function(e,t,i){var n=e+f.compileParams(t);return this.requestWrapper("DELETE",n,void 0,i)},get:function(e,t,i){var n=e+f.compileParams(t);return this.requestWrapper("GET",n,void 0,i)},patch:function(e,t,i){return this.requestWrapper("PATCH",e,t,i)},post:function(e,t,i){return this.requestWrapper("POST",e,t,i)},put:function(e,t,i){return this.requestWrapper("PUT",e,t,i)},generateUID:function(){for(var e,t=this;!e||!t.isUIDValid(e);)e=n();return e},isUIDValid:function(e){return!(e in this.requests)},cancelInflightCreate:function(e,t,i){var n=this,r=n.requests[e];if(h.debug("cancelling request locally",e,"alive?",!!r),r){n.requests[e]=void 0;var s=t?{id:t}:{};s.revision=i,r.resolve(s,200)}}});t.exports=b},{"../deferreds/RestSocketRequestDeferred":42,"../helpers/PlatformHeaders":44,"../helpers/URL":45,"../validators/SchemaValidator":109,"../wunderbits/lib/SafeParse":111,"./io/WebSocket":52,"./mixins/RequestQueueMixin":53,magiconsole:2,"wunderbits.core":12}],49:[function(e,t){"use strict";var i=e("wunderbits.core"),n=i.WBSingleton,r=i.mixins.WBBindableMixin,s=i.mixins.WBEventsMixin,o=e("../../helpers/URL"),a=e("../../wunderbits/lib/SafeParse"),c=e("./NativeXMLHttpRequest"),u=e("../../deferreds/RequestDeferred"),l=e("../mixins/RequestQueueMixin"),d=l.extend({maxRequests:5,executeRequest:function(e){var t=this,i=e.url,n=e.options,r=e.deferred;t.executingRequests[e.queueID]=e;var s=t.xhrRequest(i,{type:n.type,data:n.data,headers:n.headers,timeout:n.timeout},r);s.done(function(e,i){t.onSuccess(e,i,n)}).fail(function(e,i){t.onFailure(e,i,n)}).always(function(){delete t.executingRequests[e.queueID],t.checkQueue()})}}),f=n.extend({mixins:[r,s,d],xhrRequest:function(e,t,i){var n=this,r=!0,s=t.type,a=t.data;a&&"GET"===s&&(e=o.generateURI(e,a),a=void 0);var u=new c;return n.attachXhrListeners(u,i),u.open(s,e,r),t.timeout&&(u.timeout=t.timeout),n.setupXhrHeaders(u,t.headers,a),i.startTime=Date.now(),a?u.send(a):u.send(),i.url=e,i.xhr=u,i},setupXhrHeaders:function(e,t,i){var n="application/json; charset=utf-8";if(t)for(var r in t)e.setRequestHeader(r.toLowerCase(),t[r]);i&&e.setRequestHeader("Content-Type",n),e.setRequestHeader("Accept",n)},attachXhrListeners:function(e,t){var i=this;e.addEventListener("progress",function(n){i.onXhrProgress(n,e,t)},!1),e.addEventListener("load",function(n){i.onXhrLoad(n,e,t)},!1),e.addEventListener("error",function(n){i.onXhrError(n,e,t)},!1),e.addEventListener("abort",function(n){i.onXhrAbort(n,e,t)},!1),e.addEventListener("timeout",function(n){i.onXhrTimeout(n,e,t)},!1)},onXhrLoad:function(e,t,i){var n=this,r=2===parseInt(t.status/100,10);r&&n.triggerTiming(i),i[r?"resolve":"reject"].call(i,t.responseText,t)},triggerTiming:function(e){var t=this,i=Date.now(),n=e.startTime,r=e.loadStartTime;e.loadDurationTime=i-r,e.latencyTime=r-n,t.trigger("timing:io",{start:n,end:i,duration:i-n,latency:e.latencyTime,download:e.loadDurationTime,url:e.url,type:"ajax"})},onXhrProgress:function(e,t,i){i.loadStarted||(i.loadStartTime=Date.now(),i.loadStarted=!0)},onXhrError:function(e,t,i){this.onXhrFail(e,t,i)},onXhrAbort:function(e,t,i){this.onXhrFail(e,t,i)},onXhrTimeout:function(e,t,i){this.onXhrFail(e,t,i)},onXhrFail:function(e,t,i){i.reject(t.responseText,t)},ajax:function(e,t){var i=this,n=i.queueRequest(e,t,u);return n},onSuccess:function(e,t,i){"string"==typeof e&&204!==t.status&&(e=a.json(e)),i.success&&i.success(e,t)},onFailure:function(e,t,i){var n=(t.getResponseHeader("content-type")||"").split(";")[0];"string"==typeof e&&/application\/json/.test(n)&&(e=a.json(t.responseText)),"function"==typeof i.error&&i.error(e,t)}});t.exports=f},{"../../deferreds/RequestDeferred":41,"../../helpers/URL":45,"../../wunderbits/lib/SafeParse":111,"../mixins/RequestQueueMixin":53,"./NativeXMLHttpRequest":51,"wunderbits.core":12}],50:[function(e,t){(function(i){"use strict";t.exports=i.WebSocket||e("ws")}).call(this,"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],51:[function(e,t){(function(i){"use strict";t.exports=i.XMLHttpRequest||e("xmlhttprequest").XMLHttpRequest}).call(this,"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],52:[function(e,t){"use strict";var i=e("wunderbits.core"),n=i.WBEventEmitter,r=i.lib.assert,s=e("../../helpers/URL"),o=e("./NativeWebSocket"),a=e("../../wunderbits/lib/bindAll"),c=e("magiconsole"),u=new c("SDK:WEBSOCKET"),l=n.prototype,d=n.extend({clientClosed:!1,NativeWebSocketClass:o,socket:void 0,initialize:function(e){var t=this;t.appState=e.appState,l.initialize.apply(t,arguments);var i=["onSocketClose","onSocketError","onSocketMessage","onSocketOpen"];a(t,i),t.validateToken(),t.connect(),t.bindToAppState()},destroy:function(){var e=this;e.close(),e.unbindAll(),e.destroyed=!0},bindToAppState:function(){var e=this;e.appState&&(e.unbindFrom(e.appState),e.bindTo(e.appState,"change:online",function(){e[e.appState.isOnline()?"connect":"close"]()}))},validateToken:function(){r.string(this.appState.attributes.accessToken,"Cannot instantiate class without an auth token.")},connect:function(){var e=this;e.socket&&e.close(),e.clientClosed=!1,e.clearSocketTimeout();var t=e.appState.attributes,i={client_id:t.clientID,access_token:t.accessToken,client_device_id:t.deviceID,client_instance_id:t.instanceID},n=e.appState.attributes.realtime.host,r=s.generateURI(n,i),o=e.NativeWebSocketClass;e.socket=new o(r),e.bindToSocket()},isConnected:function(){var e=this.socket;return!(!e||1!==e.readyState)},send:function(e){this.socket.send(e)},close:function(){var e=this;e.clientClosed=!0,e.socket&&(e.socket.close(),e.socket=void 0)},bindToSocket:function(){var e=this,t=e.socket;t.addEventListener("close",e.onSocketClose),t.addEventListener("error",e.onSocketError),t.addEventListener("message",e.onSocketMessage),t.addEventListener("open",e.onSocketOpen),e.trackTimeout()},trackTimeout:function(){var e=this,t=e.appState.attributes.webSocketTimeout,i=Date.now(),n=function(){e.socket&&0===e.socket.readyState&&(Date.now()-i<t?e.socketTimeout=setTimeout(n,1e3):(e.onSocketTimeout(),e.socket&&(e.socket.close(),e.socket=void 0)))};n()},clearSocketTimeout:function(){var e=this;e.socketTimeout&&clearTimeout(e.socketTimeout)},onSocketTimeout:function(e){var t=this;t.clearSocketTimeout(),u.error("timeout",e),t.trigger("timeout")},onSocketError:function(e){var t=this;t.clearSocketTimeout(),u.error("error",e),t.trigger("error",e)},onSocketOpen:function(e){var t=this;u.info("opened",e),t.trigger("open",e)},onSocketClose:function(e){var t=this;t.clearSocketTimeout(),t.socket=void 0,u.info("closed",e),t.trigger("close",e),!t.clientClosed&&t.appState.isOnline()&&setTimeout(function(){!t.destroyed&&t.connect()},1e3)},onSocketMessage:function(e){var t=this;t.trigger("message",e)}});t.exports=d},{"../../helpers/URL":45,"../../wunderbits/lib/bindAll":112,"./NativeWebSocket":50,magiconsole:2,"wunderbits.core":12}],53:[function(e,t){"use strict";var i=e("wunderbits.core"),n=i.lib.createUID,r=i.WBMixin;t.exports=r.extend({maxRequests:5,requestsQueue:[],executingRequests:{},reset:function(){var e=this;e.requestsQueue=[],e.executingRequests={}},checkQueue:function(){var e,t=this,i=Object.keys(t.executingRequests).length;i<t.maxRequests&&(e=t.requestsQueue.shift(),e&&t.executeRequest(e))},queueRequest:function(e,t,i){var r=this,s=new i;return r.requestsQueue.push({deferred:s,url:e,options:t,queueID:n()}),r.checkQueue(),s},executeRequest:function(e){throw new Error("You must override RequestQueueMixin#executeRequest!",e)}})},{"wunderbits.core":12}],54:[function(e,t){"use strict";var i=e("wunderbits.core"),n=i.WBDeferred,r=i.WBStateModel,s=i.lib.clone,o=e("../wunderbits/WBOnlineStatus"),a=r.prototype,c=r.extend({defaults:{api:{host:"https://a.wunderlist.com/api"},realtime:{host:"wss://socket.wunderlist.com:8443/api/v1/sync"},accessToken:void 0,clientID:void 0,debug:!1,online:!0,webSocketTimeout:15e3,maxHttpRequests:5,checkHealth:!0},initialize:function(){var e=this;a.initialize.apply(e,arguments),e.initialized=new n,setTimeout(function(){e.destroyed||(e.watchOnlineState(),e.initialized.resolve())})},destroy:function(){var e=this;e.onlineState&&e.onlineState.destroy(),a.destroy.apply(e,arguments)},watchOnlineState:function(){var e=this;e.onlineState&&(e.unbindFrom(e.onlineState),e.onlineState.destroy()),e.onlineState=new o({config:e.toJSON()}),e.set("online",e.onlineState.isOnline()),e.bindTo(e.onlineState,"online","onOnline"),e.bindTo(e.onlineState,"offline","onOffline")},onOnline:function(){this.set("online",!0)},onOffline:function(){this.set("online",!1)},isOnline:function(){return!!this.attributes.online},toJSON:function(){return s(this.attributes)}});t.exports=c},{"../wunderbits/WBOnlineStatus":110,"wunderbits.core":12}],55:[function(e,t){"use strict";var i=e("wunderbits.core"),n=i.lib.clone,r=i.lib.extend,s=e("./SchemaTypes");t.exports={id:s.id,task_id:s.id,list_id:s.id,user_id:s.id,revision:s["int"],type:s.str,created_at:s.ISODate,updated_at:s.ISODate,extend:function(e){return r(n(this),e)}}},{"./SchemaTypes":63,"wunderbits.core":12}],56:[function(e,t){"use strict";var i=e("./SchemaTypes");t.exports={id:i.id,title:i.str,list_ids:i.arr,user_id:i.id,created_at:i.ISODate,updated_at:i.ISODate,revision:i["int"],type:i.str}},{"./SchemaTypes":63}],57:[function(e,t){"use strict";var i=e("./SchemaTypes"),n=e("./BaseSchema");t.exports=n.extend({created_by_id:i.id,list_type:i.str,title:i.str})},{"./BaseSchema":55,"./SchemaTypes":63}],58:[function(e,t){"use strict";var i=e("./SchemaTypes"),n=e("./BaseSchema");t.exports=n.extend({sender_id:i.id,state:i.str,owner:i.bool})},{"./BaseSchema":55,"./SchemaTypes":63}],59:[function(e,t){"use strict";var i=e("./SchemaTypes"),n=e("./BaseSchema");t.exports=n.extend({content:i.str})},{"./BaseSchema":55,"./SchemaTypes":63}],60:[function(e,t){"use strict";var i=e("./SchemaTypes");t.exports={id:i.id}},{"./SchemaTypes":63}],61:[function(e,t){"use strict";var i=e("./SchemaTypes"),n=e("./BaseSchema");t.exports=n.extend({values:i.arr})},{"./BaseSchema":55,"./SchemaTypes":63}],62:[function(e,t){"use strict";var i=e("./SchemaTypes"),n=e("./BaseSchema");t.exports=n.extend({date:i.ISODate})},{"./BaseSchema":55,"./SchemaTypes":63}],63:[function(e,t){"use strict";t.exports={id:"integer","int":"integer",bool:"boolean",arr:"array",str:"string",ISODate:"ISODate"}},{}],64:[function(e,t){"use strict";var i=e("./SchemaTypes"),n=e("./BaseSchema");t.exports=n.extend({user_id:i.id,provider_id:i.str,provider_type:i.str})},{"./BaseSchema":55,"./SchemaTypes":63}],65:[function(e,t){"use strict";var i=e("./SchemaTypes"),n=e("./BaseSchema");t.exports=n.extend({key:i.str,value:i.str})},{"./BaseSchema":55,"./SchemaTypes":63}],66:[function(e,t){"use strict";var i=e("./SchemaTypes"),n=e("./BaseSchema");t.exports=n.extend({completed:i.bool,completed_at:i.ISODate,completed_by_id:i.id,created_by_id:i.id,title:i.str})},{"./BaseSchema":55,"./SchemaTypes":63}],67:[function(e,t){"use strict";var i=e("./SchemaTypes"),n=e("./BaseSchema");t.exports=n.extend({assignee_id:i.id,completed:i.bool,completed_at:i.ISODate,completed_by_id:i.id,created_by_id:i.id,due_date:i.ISODate,starred:i.bool,title:i.str})},{"./BaseSchema":55,"./SchemaTypes":63}],68:[function(e,t){"use strict";var i=e("./SchemaTypes"),n=e("./BaseSchema");t.exports=n.extend({read:i.bool,text:i.str})},{"./BaseSchema":55,"./SchemaTypes":63}],69:[function(e,t){"use strict";var i=e("./SchemaTypes");t.exports={id:i.id,name:i.str,organization_id:i.id,created_at:i.ISODate,updated_at:i.ISODate,revision:i["int"],team_type:i.str,type:i.str}},{"./SchemaTypes":63}],70:[function(e,t){"use strict";var i=e("./SchemaTypes"),n=e("./BaseSchema");t.exports=n.extend({name:i.str,email:i.str,pro:i.bool})},{"./BaseSchema":55,"./SchemaTypes":63}],71:[function(e,t){"use strict";var i=e("./Position");t.exports={list:e("./List"),folder:e("./Folder"),membership:e("./Membership"),note:e("./Note"),reminder:e("./Reminder"),setting:e("./Setting"),service:e("./Service"),subtask:e("./Subtask"),task:e("./Task"),task_comment:e("./TaskComment"),user:e("./User"),team:e("./Team"),organization:e("./Organization"),list_position:i,subtask_position:i,task_position:i}},{"./Folder":56,"./List":57,"./Membership":58,"./Note":59,"./Organization":60,"./Position":61,"./Reminder":62,"./Service":64,"./Setting":65,"./Subtask":66,"./Task":67,"./TaskComment":68,"./Team":69,"./User":70}],72:[function(e,t){"use strict";var i=e("./Conversations");t.exports=i.extend({baseUrl:"/activities",type:"activities"})},{"./Conversations":74}],73:[function(e,t){"use strict";var i=e("wunderbits.core"),n=i.lib.assert,r=e("./Service"),s=r.prototype;t.exports=r.extend({initialize:function(){var e=this;s.initialize.apply(e,arguments),e.validateAccessParams()},validateAccessParams:function(){var e=this,t=e.appState.attributes;n.string(t.clientID,"This service requires a client ID."),n.string(t.accessToken,"This service requires an access token.")}})},{"./Service":93,"wunderbits.core":12}],74:[function(e,t){"use strict";var i=e("./AuthenticatedService");t.exports=i.extend({baseUrl:"/conversations",type:"conversations",all:function(e,t){var i=this;return i.get(i.baseUrl,e,t).promise()}})},{"./AuthenticatedService":73}],75:[function(e,t){"use strict";var i=e("./ServiceGetOnly");t.exports=i.extend({baseUrl:"/export",type:"export",all:function(e){var t=this;return t.get(t.baseUrl,void 0,e,3e5).promise()}})},{"./ServiceGetOnly":94}],76:[function(e,t){"use strict";var i=e("./ServiceGetOnly");t.exports=i.extend({baseUrl:"/features",type:"feature"})},{"./ServiceGetOnly":94}],77:[function(e,t){"use strict";var i=e("wunderbits.core"),n=i.lib.assert,r=i.WBDeferred,s=e("magiconsole"),o=new s("SDK:SERVICE:FILES"),a=e("./AuthenticatedService"),c=a.prototype;t.exports=a.extend({apiVersion:2,baseUrl:"/files",type:"file",create:function(e,t){var i=this;try{i.validateCreateData(e)}catch(n){return o.error(n),(new r).reject({errors:[n.toString()]},0).promise()}var s=c.create.call(i,e,t);return s.promise()},validateCreateData:function(e){e=e||{};var t=Object.keys(e).length,i=" required for file creation";n(t,"data"+i),n.number(e.task_id,"data.task_id"+i)}})},{"./AuthenticatedService":73,magiconsole:2,"wunderbits.core":12}],78:[function(e,t){"use strict";var i=e("./ServiceGetOnly");t.exports=i.extend({baseUrl:"/ical/feed",type:"ical_feed",getURL:function(e){var t=this;return t.get(t.baseUrl,void 0,e).promise()}})},{"./ServiceGetOnly":94}],79:[function(e,t){"use strict";var i=e("./AuthenticatedService");t.exports=i.extend({baseUrl:"/import",type:"import",create:function(e,t){var i=this;return i.post(i.baseUrl,e,t,3e5).promise()}})},{"./AuthenticatedService":73}],80:[function(e,t){"use strict";var i=e("./AuthenticatedService");t.exports=i.extend({baseUrl:"/list_positions",type:"list_position"})},{"./AuthenticatedService":73}],81:[function(e,t){"use strict";var i=e("./AuthenticatedService");t.exports=i.extend({baseUrl:"/list_reminders_collections",type:"list_reminders_collection"})},{"./AuthenticatedService":73}],82:[function(e,t){"use strict";var i=e("wunderbits.core"),n=i.lib.assert,r=i.WBDeferred,s=e("magiconsole"),o=new s("SDK:SERVICE:LISTS"),a=e("./Memberships"),c=e("./AuthenticatedService"),u=c.prototype;t.exports=c.extend({baseUrl:"/lists",type:"list",initialize:function(e){var t=this;u.initialize.apply(t,arguments),t.membershipsService=new a(e)},create:function(e){var t=this;try{t.validateCreateData(e)}catch(i){return o.error(i),(new r).reject({errors:[i.toString()]},0).promise()}var n=u.create.apply(t,arguments);return n.promise()},accepted:function(){var e=this,t=new r;return e.membershipsService.mine().done(function(i){var n=i.filter(function(e){return"accepted"===e.state}),r=n.map(function(e){return e.list_id});e.all().done(function(e){var i=e.filter(function(e){return r.indexOf(e.id)>-1});t.resolve(i)}).fail(t.reject,t)}).fail(t.reject,t),t.promise()},validateCreateData:function(e){e=e||{},n(e.title,"Title is required for list creation.")}})},{"./AuthenticatedService":73,"./Memberships":83,magiconsole:2,"wunderbits.core":12}],83:[function(e,t){"use strict";var i=e("wunderbits.core"),n=i.WBDeferred,r=e("./User"),s=e("./AuthenticatedService"),o=s.prototype;t.exports=s.extend({baseUrl:"/memberships",type:"membership",initialize:function(e){var t=this;o.initialize.apply(t,arguments),t.userService=new r(e)},mine:function(){var e=this,t=new n;return e.userService.all().done(function(i){e.forUser(i.id).done(t.resolve,t).fail(t.reject,t)}).fail(t.reject,t),t.promise()}})},{"./AuthenticatedService":73,"./User":106,"wunderbits.core":12}],84:[function(e,t){"use strict";var i=e("wunderbits.core"),n=i.WBMixin,r=e("../../validators/SchemaValidator");t.exports=n.extend({validateData:function(e,t){r.validateData(e,t)}})},{"../../validators/SchemaValidator":109,"wunderbits.core":12}],85:[function(e,t){"use strict";var i=e("wunderbits.core"),n=i.lib.assert,r=i.WBDeferred,s=e("magiconsole"),o=new s("SDK:SERVICE:CREATE"),a=e("./BaseServiceMixin");t.exports=a.extend({create:function(e,t){var i=this,s=e&&Object.keys(e).length;try{n(s,"Creation requires data.")}catch(a){return o.error(a),(new r).reject({errors:[a.toString()]},0).promise()}e=i.cleanCreateData(e);try{i.validateData(e,i.type)}catch(a){return o.error(a),(new r).reject({errors:[a.toString()]},0).promise()}return i.post(i.baseUrl,e,t)},cleanCreateData:function(e){for(var t in e)(null===e[t]||void 0===e[t])&&delete e[t];return e}})},{"./BaseServiceMixin":84,magiconsole:2,"wunderbits.core":12}],86:[function(e,t){"use strict";var i=e("wunderbits.core"),n=i.WBMixin,r=i.lib.assert,s=i.WBDeferred,o=e("magiconsole"),a=new o("SDK:SERVICE:DELETE"),c=e("../../helpers/URL");t.exports=n.extend({deleteID:function(e,t,i){try{r.number(e,"Deletion requires an id."),r.number(t,"Deletion requires a revision.")}catch(n){return a.error(n),(new s).reject({errors:[n.toString()]},0).promise()}var o={revision:t},u=c.compileParams(o),l=this;return l["delete"](l.baseUrl+"/"+e+u,void 0,i)}})},{"../../helpers/URL":45,magiconsole:2,"wunderbits.core":12}],87:[function(e,t){"use strict";var i=e("wunderbits.core"),n=i.WBMixin;t.exports=n.extend({getID:function(e,t){var i=this;return i.get(i.baseUrl+"/"+e,void 0,t)},getItemsForAttribute:function(e,t,i,n){var r=this,s={};return s[t]=i,r.get(e,s,n).promise()},forUser:function(e,t){var i=this;return i.getItemsForAttribute(i.baseUrl,"user_id",e,t)},forTask:function(e,t){var i=this;return i.getItemsForAttribute(i.baseUrl,"task_id",e,t)},forList:function(e,t){var i=this;return i.getItemsForAttribute(i.baseUrl,"list_id",e,t)},all:function(e){var t=this;return t.get(t.baseUrl,void 0,e).promise()},forAllLists:function(e){var t=this;return t.get(t.baseUrl+"/lists",void 0,e)},forAllTasksForList:function(e,t){var i=this;return i.getItemsForAttribute(i.baseUrl+"/tasks","list_id",e,t)}})},{"wunderbits.core":12}],88:[function(e,t){"use strict";var i=e("wunderbits.core"),n=i.lib.assert,r=i.WBDeferred,s=e("magiconsole"),o=new s("SDK:SERVICE:UPDATE"),a=e("./BaseServiceMixin");t.exports=a.extend({update:function(e,t,i,s){var a=this,c=i&&Object.keys(i).length;try{n.number(e,"Updating a resource requires an id of type number."),n.number(t,"Updating a resource requires a revision of type number."),n(c,"Updating a resource requires data to be sent.")}catch(u){return o.error(u),(new r).reject({errors:[u.toString()]},0)}return i.revision=t,a.validateData(i,a.type),i=a.prepareDataForPatch(i),a.patch(a.baseUrl+"/"+e,i,s)},prepareDataForPatch:function(e){var t,i=[];for(var n in e)t=e[n],(null===t||void 0===t)&&(i.push(n),delete e[n]);return i.length&&(e.remove=i),e}})},{"./BaseServiceMixin":84,magiconsole:2,"wunderbits.core":12}],89:[function(e,t){"use strict";var i=e("./AuthenticatedService");t.exports=i.extend({baseUrl:"/notes",type:"note",forList:function(e,t,i){var n=this,r=n.get(n.baseUrl,{list_id:e,completed_tasks:!!t},i);return r.promise()}})},{"./AuthenticatedService":73}],90:[function(e,t){"use strict";var i=e("./AuthenticatedService");t.exports=i.extend({baseUrl:"/previews",type:"preview",getPreview:function(e,t,i,n){var r=this,s={file_id:e,platform:t,size:i};return r.get(r.baseUrl,s,n)}})},{"./AuthenticatedService":73}],91:[function(e,t){"use strict";var i=e("./AuthenticatedService");t.exports=i.extend({baseUrl:"/reminders",type:"reminder",forList:function(e,t,i){var n=this,r=n.get(n.baseUrl,{list_id:e,completed_tasks:!!t},i);return r.promise()}})},{"./AuthenticatedService":73}],92:[function(e,t){"use strict";var i=e("./AuthenticatedService");t.exports=i.extend({baseUrl:"/root",type:"root"})},{"./AuthenticatedService":73}],93:[function(e,t){"use strict";var i=e("wunderbits.core"),n=i.WBEventEmitter,r=i.lib.assert,s=e("../models/ApplicationState"),o=e("../io/IO"),a=e("./Mixins/ServiceCreate"),c=e("./Mixins/ServiceDelete"),u=e("./Mixins/ServiceGet"),l=e("./Mixins/ServiceUpdate"),d=["get","post","put","patch","delete"],f=n.prototype,p=n.extend({mixins:[a,c,u,l],baseUrl:void 0,apiVersion:1,type:void 0,io:void 0,"delete":void 0,get:void 0,patch:void 0,post:void 0,put:void 0,initialize:function(e){var t=this;f.initialize.apply(t,arguments),t.options=e=e||{},t.appState=e.appState,t.checkAppState(),t.baseUrl="/v"+t.apiVersion+t.baseUrl,t.options.websocket?t.setupSocketInterfaces():t.setupRestInterfaces()},setupRestInterfaces:function(){var e,t=this;e=t.options.httpIO?t.options.httpIO:new o({config:t.appState.toJSON()});var i=t.io=e;d.forEach(function(e){t[e]=i.io[e]}),t.bindTo(t.io,"unauthorized",function(){!t.destroyed&&t.trigger("unauthorized")})},checkAppState:function(){var e=this;!e.appState&&e.options.config&&(e.appState=new s(e.options.config),e.options.appState=e.appState)},setupSocketInterfaces:function(){var e=this,t=e.options.restSocket;r(t,"No RestSocket instance available."),e.io=t,d.forEach(function(t){e[t]=e.io[t]})},destroy:function(){function e(e){for(var t in e)e[t]=void 0}var t=this;t.unbindAll(),e(t),t.destroyed=!0},destroyed:!1});t.exports=p},{"../io/IO":46,"../models/ApplicationState":54,"./Mixins/ServiceCreate":85,"./Mixins/ServiceDelete":86,"./Mixins/ServiceGet":87,"./Mixins/ServiceUpdate":88,"wunderbits.core":12}],94:[function(e,t){"use strict";var i=e("wunderbits.core"),n=i.lib.assert,r=e("./Service"),s=e("./Mixins/ServiceGet"),o=e("../io/IO"),a=function(){throw new Error("Method not allowed for this service.")};t.exports=r.extend({mixins:[s],setupRestInterfaces:function(){var e=this,t=e.io=new o({config:e.appState.toJSON()});e.get=t.io.get},setupSocketInterfaces:function(){var e=this,t=e.options.restSocket;n(t,"No RestSocket instance available."),e.io=t,e.get=e.io.get},"delete":a,patch:a,post:a,put:a})},{"../io/IO":46,"./Mixins/ServiceGet":87,"./Service":93,"wunderbits.core":12}],95:[function(e,t){"use strict";var i=e("./AuthenticatedService");t.exports=i.extend({baseUrl:"/services",type:"service"})},{"./AuthenticatedService":73}],96:[function(e,t){"use strict";var i=e("./AuthenticatedService");t.exports=i.extend({baseUrl:"/settings",type:"setting"})},{"./AuthenticatedService":73}],97:[function(e,t){"use strict";var i=e("./AuthenticatedService");t.exports=i.extend({baseUrl:"/subtask_positions",type:"subtask_position",forList:function(e,t,i){var n=this,r=n.get(n.baseUrl,{list_id:e,completed_tasks:!!t},i);return r.promise()}})},{"./AuthenticatedService":73}],98:[function(e,t){"use strict";var i=e("wunderbits.core"),n=i.lib.assert,r=i.WBDeferred,s=e("magiconsole"),o=new s("SDK:SERVICE:SUBTASKS"),a=e("./AuthenticatedService"),c=a.prototype;t.exports=a.extend({baseUrl:"/subtasks",type:"subtask",create:function(e){var t=this;try{t.validateCreateData(e)}catch(i){return o.error(i),(new r).reject({errors:[i.toString()]},0).promise()}var n=c.create.apply(t,arguments);return n.promise()},forList:function(e,t,i){var n=this,r=n.get(n.baseUrl,{list_id:e,completed_tasks:!!t},i);return r.promise()},validateCreateData:function(e){e=e||{};var t=Object.keys(e).length,i=" required for subtask creation";n(t,"data"+i),n.number(e.task_id,"data.task_id"+i),n.string(e.title,"data.title"+i)}})},{"./AuthenticatedService":73,magiconsole:2,"wunderbits.core":12}],99:[function(e,t){"use strict";var i=e("./AuthenticatedService");t.exports=i.extend({baseUrl:"/task_comments",type:"task_comment"})},{"./AuthenticatedService":73}],100:[function(e,t){"use strict";var i=e("./AuthenticatedService");t.exports=i.extend({baseUrl:"/task_comments_states",type:"task_comments_state"})},{"./AuthenticatedService":73}],101:[function(e,t){"use strict";var i=e("./AuthenticatedService");t.exports=i.extend({baseUrl:"/task_positions",type:"task_position"})},{"./AuthenticatedService":73}],102:[function(e,t){"use strict";var i=e("wunderbits.core"),n=i.lib.assert,r=i.WBDeferred,s=e("magiconsole"),o=new s("SDK:SERVICE:TASKS"),a=e("./AuthenticatedService"),c=a.prototype;t.exports=a.extend({baseUrl:"/tasks",type:"task",forList:function(e,t,i){var n=this,r=n.get(n.baseUrl,{list_id:e,completed:!!t},i);return r.promise()},create:function(e){var t=this;try{t.validateCreateData(e)}catch(i){return o.error(i),(new r).reject({errors:[i.toString()]},0).promise()}var n=c.create.apply(t,arguments);return n.promise()},validateCreateData:function(e){e=e||{};var t=Object.keys(e).length,i=" required for task creation";n(t,"data"+i),n.number(e.list_id,"data.list_id"+i),n.string(e.title,"data.title"+i)}})},{"./AuthenticatedService":73,magiconsole:2,"wunderbits.core":12}],103:[function(e,t){"use strict";var i=e("./AuthenticatedService");t.exports=i.extend({baseUrl:"/lists/tasks_count",type:"tasks_count"})},{"./AuthenticatedService":73}],104:[function(e,t){"use strict";var i=e("./AuthenticatedService");t.exports=i.extend({baseUrl:"/unread_activity_counts",type:"unread_activities_count"})
},{"./AuthenticatedService":73}],105:[function(e,t){"use strict";var i=e("./AuthenticatedService");t.exports=i.extend({baseUrl:"/uploads",type:"upload",create:function(e,t){var i=this;return i.post(i.baseUrl,e,t)},getPart:function(e,t,i){var n=this,r={part_number:t};return n.get(n.baseUrl+"/"+e+"/parts",r,i)},finish:function(e,t){var i=this,n={state:"finished"};return i.patch(i.baseUrl+"/"+e,n,t)}})},{"./AuthenticatedService":73}],106:[function(e,t){"use strict";var i=e("wunderbits.core"),n=i.lib.assert,r=i.WBDeferred,s=e("magiconsole"),o=new s("SDK:SERVICE:USER"),a=e("./AuthenticatedService");t.exports=a.extend({baseUrl:"/user",type:"user",update:function(e,t,i){var s=this,a=t&&Object.keys(t).length;try{n.number(e,"Updating a user requires a revision of type number."),n(a,"Updating a user requires data to be sent.")}catch(c){return o.error(c),(new r).reject({errors:[c.toString()]},0).promise()}t.revision=e;try{s.validateData(t,s.type)}catch(c){return o.error(c),(new r).reject({errors:[c.toString()]},0)}return t=s.prepareDataForPatch(t),s.patch(s.baseUrl,t,i)},changeEmail:function(e,t,i){var n=this,r={email:e,password:t};return n.patch(n.baseUrl+"/email",r,i)},changePassword:function(e,t,i){var n=this,r={password:e,old_password:t};return n.patch(n.baseUrl+"/password",r,i)},deleteSelf:function(e,t){var i=this,n={password:e};return i["delete"](i.baseUrl,n,t)}})},{"./AuthenticatedService":73,magiconsole:2,"wunderbits.core":12}],107:[function(e,t){"use strict";var i=e("./AuthenticatedService");t.exports=i.extend({baseUrl:"/users",type:"user"})},{"./AuthenticatedService":73}],108:[function(e,t){"use strict";var i=e("./ServiceGetOnly"),n={activities:e("./Activities"),conversations:e("./Conversations"),"export":e("./Export"),features:e("./Features"),files:e("./Files"),"import":e("./Import"),ical_feed:e("./IcalFeed"),list_positions:e("./ListPositions"),list_reminders_collections:e("./ListRemindersCollections"),lists:e("./Lists"),memberships:e("./Memberships"),notes:e("./Notes"),previews:e("./Previews"),reminders:e("./Reminders"),root:e("./Root"),services:e("./Services.js"),settings:e("./Settings"),subtask_positions:e("./SubtaskPositions"),subtasks:e("./Subtasks"),task_comments:e("./TaskComments"),task_comments_states:e("./TaskCommentsStates"),task_positions:e("./TaskPositions"),tasks:e("./Tasks"),tasks_counts:e("./TasksCounts"),unread_activities_counts:e("./UnreadActivitiesCounts"),uploads:e("./Uploads"),user:e("./User"),users:e("./Users")},r=["list","task"];r.forEach(function(e){var t=e+"_revisions";n[t]=i.extend({baseUrl:"/"+t,type:t})}),t.exports=n},{"./Activities":72,"./Conversations":74,"./Export":75,"./Features":76,"./Files":77,"./IcalFeed":78,"./Import":79,"./ListPositions":80,"./ListRemindersCollections":81,"./Lists":82,"./Memberships":83,"./Notes":89,"./Previews":90,"./Reminders":91,"./Root":92,"./ServiceGetOnly":94,"./Services.js":95,"./Settings":96,"./SubtaskPositions":97,"./Subtasks":98,"./TaskComments":99,"./TaskCommentsStates":100,"./TaskPositions":101,"./Tasks":102,"./TasksCounts":103,"./UnreadActivitiesCounts":104,"./Uploads":105,"./User":106,"./Users":107}],109:[function(e,t){"use strict";var i=e("wunderbits.core"),n=i.WBSingleton,r=e("magiconsole"),s=new r("SDK:SCHEMAVALIDATOR"),o=e("../schemas"),a={array:"isArray",integer:"isInteger","boolean":"isBoolean",string:"isString",ISODate:"isISODate"},c=n.extend({validateData:function(e,t){var i,n,r,c,u=this,l=!0,d=o[t];if(!d)return s.warn('No data schema for type "'+t+'"'),!0;for(var f in e)r=void 0,i=d[f],i||s.warn("No validation set for key",f,"for",t),c=e[f],n=u[a[i]],n&&(r=n.call(u,c),r||(s.warn(t+" value "+c+" ("+typeof c+') for key "'+f+'"" did not pass validation for type '+i),l=!1));return l},isArray:function(e){return Array.isArray(e)},isBoolean:function(e){return e===!1||e===!0},isInteger:function(e){return"number"==typeof e&&parseFloat(e)===parseInt(e,10)&&!isNaN(e)},isString:function(e){return"string"==typeof e},isISODate:function(e){var t=this;if(!t.isString(e))return!1;var i=/^\d{4}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-2])T(0[0-9]|1[0-9]|2[0-3])(:([0-5][0-9])){2}(\.\d{3})?Z$/;return i.test(e)}});t.exports=c},{"../schemas":71,magiconsole:2,"wunderbits.core":12}],110:[function(e,t){(function(i){"use strict";var n=e("wunderbits.core"),r=n.WBEventEmitter,s=e("../helpers/HealthCheck"),o=i.navigator||{onLine:!0},a=r.extend({online:null,initialize:function(e){var t=this,n=i.document;if(t.online=o.onLine,i.addEventListener)i.addEventListener("online",t.onOnline.bind(t),!1),i.addEventListener("offline",t.onOffline.bind(t),!1);else if(n){var r=n.body;r.ononline=t.isOnline,r.onoffline=t.isOffline}e.config.checkHealth&&t.bindToApiHealth(e)},destroy:function(){s.destroy()},bindToApiHealth:function(e){var t=this;s.init(e),t.bindTo(s,"healthy","onOnline"),t.bindTo(s,"unhealthy","onOffline")},isOnline:function(){return this.online},onOnline:function(){var e=this;e.online=!0,e.trigger("online")},onOffline:function(){var e=this;e.online=!1,e.trigger("offline")}});t.exports=a}).call(this,"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"../helpers/HealthCheck":43,"wunderbits.core":12}],111:[function(e,t){"use strict";var i=e("wunderbits.core"),n=i.WBSingleton,r=e("magiconsole"),s=new r("SDK:SAFEPARSE"),o=n.extend({json:function(e){try{return JSON.parse(e)}catch(t){s.warn('Unable to parse "'+e+'"')}}});t.exports=o},{magiconsole:2,"wunderbits.core":12}],112:[function(e,t){"use strict";var i=e("wunderbits.core"),n=i.lib.functions,r=[],s=function(){return function(e){for(var t,i=arguments.length>1?r.concat.apply(r,r.slice.call(arguments,1)):n(e);i.length;)t=i.shift(),"constructor"!==t&&(e[t]=e[t].bind(e))}}();t.exports=s},{"wunderbits.core":12}],113:[function(e,t){"use strict";var i=e("wunderbits.core"),n=i.WBEventEmitter,r=i.WBDeferred,s=i.lib.extend,o=e("../io/io/AjaxTransport"),a=e("../config/default"),c=e("../models/ApplicationState"),u=e("../io/IO"),l=e("../io/RestSocket"),d=e("../helpers/PlatformHeaders"),f=e("../services"),p=e("magiconsole"),v=n.prototype,h=n.extend({auth:void 0,state:void 0,online:void 0,initialized:void 0,http:void 0,socket:void 0,initialize:function(e){var t=this;v.initialize.apply(t,arguments),t.options=e=s(a,e||{}),t.setupLogging(t.options),t.validateOptions(),t.appState=new c(e),d.init(e);var i=t.state=new r;t.initialized=t.state.promise(),t.online=t.appState.isOnline(),t.start().done(i.resolveWith,i,t).fail(i.reject,i)},setupLogging:function(e){e.logLevel&&p.setLevel(e.logLevel),e.logPattern&&p.setPattern(e.logPattern)},isInitialized:function(){var e=this;return!(!e.initialized||"resolved"!==e.initialized.state())},start:function(){var e,t=this;return e=t.getServices(),t.bindTo(t.appState,"change:online","onOnlineOffline"),t.bindTo(o,"timing:io","onIOTiming"),e},onOnlineOffline:function(){var e=this;e.online=e.appState.isOnline(),e.trigger(e.online?"online":"offline")},onIOTiming:function(e){var t=this;t.trigger("timing:io",e)},getServices:function(){var e,t,i,n=this,s={http:{},socket:{}},o=new r,a=n.appState.attributes.accessToken;return n.createSocket(a).done(function(){n.http=void 0,n.socket=void 0,t=t||n.options.services||Object.keys(f),n.httpIO=new u({config:n.appState.toJSON()});for(var r=0,a=t.length;a>r;r++)e=t[r],i=f[e],s.http[e]=new i({appState:n.appState,httpIO:n.httpIO}),n.bindTo(s.http[e],"unauthorized",n.onUnauthorized),s.socket[e]=new i({websocket:!0,restSocket:n.restSocket,appState:n.appState});n.http=s.http,n.socket=s.socket,o.resolve(s)}),o.promise()},isSocketOnline:function(){var e=this,t=e.restSocket,i=t&&t.socket,n=!(!i||!i.isConnected());return n},getOutlet:function(){var e=this,t=e.isSocketOnline(),i=!!e.options.forceHTTP;return t&&!i?e.socket:e.http},createSocket:function(){var e=this;e.restSocket&&e.unbindFrom(e.restSocket);var t=new l({appState:e.appState,config:e.options});return e.restSocket=t,e.bindTo(t,"event",function(t){e.trigger("event",t)}),e.bindTo(t,"desktopNotification",function(t){e.trigger("desktopNotification",t)}),e.bindTo(t,"unauthorized",e.onUnauthorized),e.bindTo(t,"timing:io","onIOTiming"),t.ready.promise()},onUnauthorized:function(){var e=this;e.trigger("unauthorized"),e.destroy()},destroy:function(){function e(e){for(var t in e)e[t]=void 0}var t=this;t.restSocket&&t.restSocket.destroy(),t.unbindAll();var i=["http","socket"];i.forEach(function(e){var i;for(var n in t[e])i=t[e][n],i.destroy&&i.destroy();t[e]=void 0}),t.appState.destroy(),e(t),t.destroyed=!0},destroyed:!1,validateOptions:function(){var e=this,t=e.options||{},i=!!t.accessToken;if(!t.clientID||!i)throw new Error("Cannot initialize the Wunderlist SDK without a Client ID or auth credentials")},cancelInflightCreate:function(e,t,i){var n=this,r=n.restSocket,s=n.httpIO;r&&r.cancelInflightCreate(e,t,i),s&&s.cancelInflightCreate(e,t,i)}},{services:f,headers:d});t.exports=h},{"../config/default":40,"../helpers/PlatformHeaders":44,"../io/IO":46,"../io/RestSocket":48,"../io/io/AjaxTransport":49,"../models/ApplicationState":54,"../services":108,magiconsole:2,"wunderbits.core":12}]},{},[113])(113)});